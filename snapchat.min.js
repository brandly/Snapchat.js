(function(e,t){"use strict";var n={hasTouch:"ontouchstart"in t.documentElement,createVerticalRainbow:function(e,t){var n=e.createLinearGradient(0,0,0,t);return n.addColorStop(0,"rgb(255,   0,   0)"),n.addColorStop(.15,"rgb(255,   0, 255)"),n.addColorStop(.33,"rgb(0,     0, 255)"),n.addColorStop(.49,"rgb(0,   255, 255)"),n.addColorStop(.67,"rgb(0,   255,   0)"),n.addColorStop(.84,"rgb(255, 255,   0)"),n.addColorStop(1,"rgb(255,   0,   0)"),n},relativeMouseCoords:function(t,n){var o=0,r=0;do o+=n.offsetLeft-n.scrollLeft,r+=n.offsetTop-n.scrollTop;while(n=n.offsetParent);return{x:t.pageX-o-e.scrollX,y:t.pageY-r-e.scrollY}},css:function(e,t){for(var n in t)e.style[n]=t[n]},draw:function(e,t,n){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath(),e.stroke()},borderStyles:{border:"4px solid white",borderRadius:"5px","box-shadow":"0 0 5px black"}},o={down:n.hasTouch?"touchstart":"mousedown",move:n.hasTouch?"touchmove":"mousemove",up:n.hasTouch?"touchend":"mouseup",out:n.hasTouch?"touchcancel":"mouseout"},r={element:t.createElement("canvas"),size:{width:15,height:200},init:function(){var e,i=r.element;r.context=e=i.getContext("2d"),i.width=this.size.width,i.height=this.size.height,this.context.fillStyle=n.createVerticalRainbow(e,this.size.height),this.context.fillRect(0,0,this.size.width,this.size.height),i.addEventListener(o.down,function(e){function t(){i.removeEventListener(o.move,r.setDrawingColor),i.removeEventListener(o.up,t),i.removeEventListener(o.out,t)}r.setDrawingColor(e),i.addEventListener(o.move,r.setDrawingColor),i.addEventListener(o.up,t),i.addEventListener(o.out,t)}),n.css(i,{position:"fixed",top:"95px",right:"10px",zIndex:"1001",display:"none"}),n.css(i,n.borderStyles),t.body.appendChild(i)},setDrawingColor:function(e){var t=n.relativeMouseCoords(e,r.element),o=r.context.getImageData(0,Math.min(t.y,r.size.height-1),1,1).data;i.setCurrentColor(o)},isVisibile:function(){return""===r.element.style.display},show:function(){n.css(r.element,{display:""})},hide:function(){n.css(r.element,{display:"none"})}},i={element:t.createElement("div"),init:function(){var e=i.element;e.addEventListener("click",function(){r.isVisibile()?(r.hide(),s.disable(),l.hide()):(r.show(),s.enable(),l.refresh())}),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="50px" height="50px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve"><path style="fill:white;" d="M92.676,7.324C87.805,2.441,81.408,0,75,0c-6.396,0-12.793,2.441-17.676,7.324L0.098,64.551L0,100  h35.352l57.324-57.324C102.441,32.91,102.441,17.09,92.676,7.324z M30.176,87.5H25V75H12.573l0.013-5.249l53.576-53.589l0,0  l17.676,17.676l0,0L30.176,87.5z"/></svg>',n.css(e,{position:"fixed",top:"10px",right:"10px",padding:"6px",zIndex:"1001",lineHeight:"1",cursor:"pointer"}),n.css(e,n.borderStyles),i.refresh(),t.body.appendChild(e)},currentColor:[255,0,0],getCurrentColor:function(){return"rgb("+i.currentColor.join(",")+")"},setCurrentColor:function(e){for(var t=0;3>t;t++)i.currentColor[t]=e[t];i.refresh()},refresh:function(){var e=i.getCurrentColor();n.css(i.element,{backgroundColor:e}),s.setColor(e)}},s={element:t.createElement("canvas"),history:[],init:function(){var e,r=s.element;s.context=e=this.element.getContext("2d"),r.width=t.body.scrollWidth,r.height=t.body.scrollHeight;var c=null;r.addEventListener(o.down,function(t){function d(t){var o=n.relativeMouseCoords(t,r);n.draw(e,c,o),c=o,h.push(o)}function a(){r.removeEventListener(o.move,d),r.removeEventListener(o.up,a),s.history.push(h),l.refresh()}var h=[];h.color=i.getCurrentColor(),c=n.relativeMouseCoords(t,r),h.push(c),r.addEventListener(o.move,d),r.addEventListener(o.up,a)}),n.css(r,{zIndex:"1000",position:"absolute",top:0,left:0,"pointer-events":"none"}),s.defaultLineStyle(),t.body.appendChild(r)},defaultLineStyle:function(){s.context.lineWidth=5,s.context.lineJoin="round"},setColor:function(e){s.context.strokeStyle=e},enable:function(){n.css(s.element,{"pointer-events":"",cursor:"crosshair"})},disable:function(){n.css(s.element,{"pointer-events":"none",cursor:""})},redraw:function(){s.element.width=s.element.width,s.defaultLineStyle();for(var e=0,t=s.history.length;t>e;e++){var o=s.history[e];s.setColor(o.color);for(var r=0,l=o.length-1;l>r;r++)n.draw(s.context,o[r],o[r+1])}i.refresh()},undo:function(){s.history.pop(),s.redraw(),l.refresh()}},l={element:t.createElement("div"),init:function(){var e=l.element;e.addEventListener("click",function(){s.undo()}),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 30 30" enable-background="new 0 0 30 30" xml:space="preserve" fill="white" transform="translate(30), scale(-1, 1)" ><g transform="translate(30,0), scale(-1,1)"><rect x="-131" y="-29" display="none" width="198" height="87"/><path d="M-89.562-16c15.323,0,20.256,11.675,20.857,13.264l10.103-9.526v34.928l-35.445-11.228l12.513-5.865  c-1.783-2.515-5.753-5.132-8.668-5.132c-3.417,0-10.462,0.213-11.103,15.801S-91.27,37.808-90.203,44  c-12.812-2.562-25.195-22.419-25.195-34.88S-106.003-16-89.562-16z" /><path d="M-29.708-7c10.215,0,13.504,7.784,13.905,8.843l6.735-6.351v23.286l-23.63-7.485l8.342-3.91  c-1.188-1.676-3.836-3.421-5.779-3.421c-2.278,0-6.975,0.142-7.401,10.535c-0.427,10.393,6.69,14.376,7.401,18.504  c-8.541-1.707-16.796-14.946-16.796-23.253C-46.932,1.439-40.669-7-29.708-7z"/><path d="M13.719,0c7.662,0,10.128,5.838,10.429,6.632l5.051-4.763v17.464L11.477,13.72l6.256-2.933  c-0.891-1.257-2.877-2.566-4.334-2.566c-1.708,0-5.231,0.106-5.551,7.901C7.527,23.916,12.865,26.904,13.398,30  C6.993,28.72,0.801,18.791,0.801,12.56S5.498,0,13.719,0z"/><path d="M45.146,4c5.107,0,6.752,3.892,6.952,4.421l3.368-3.175v11.643l-11.815-3.743l4.171-1.955  c-0.594-0.838-1.918-1.71-2.89-1.71c-1.139,0-3.487,0.071-3.7,5.267c-0.214,5.196,3.345,7.188,3.7,9.252  c-4.271-0.854-8.398-7.473-8.398-11.626C36.534,8.22,39.666,4,45.146,4z"/></g></svg>',n.css(e,{display:"none",position:"fixed",top:"10px",right:"90px",padding:"5px",zIndex:"1001",lineHeight:"1",cursor:"pointer"}),n.css(e,n.borderStyles),t.body.appendChild(e)},show:function(){n.css(l.element,{display:""})},hide:function(){n.css(l.element,{display:"none"})},refresh:function(){if(s.history.length){var e=s.history[s.history.length-1].color;n.css(l.element,{backgroundColor:e}),l.show()}else l.hide()}};s.init(),i.init(),r.init(),l.init()}).call(this,window,document);